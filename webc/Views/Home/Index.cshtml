<div class="topbar" style="display: none">
    
</div>

<script src="/Scripts/jquery.signalR-2.1.2.js"></script>
<script src="/signalr/hubs"></script>



<div class="row">
    <div class="col-md-4">
        <div id="friend-window" class="friend-window window" onmousedown="setTopmost(this)">
            <div class="window-header">Friend List</div>
            <ul id="friend-list" class="friend-list"></ul>
            <div class="no-friends-marker"> - No Friends - </div>
        </div>

        <div id="login-window" class="login-window window" onmousedown="setTopmost(this)">
            <div class="window-header">Login</div>
            <div>
                <input id="login-username" type="text" value="un" />
            </div>
            <div>
                <input id="login-password" type="password" value="pw" />
            </div>
            <div>
                <button onclick="startLogin($('#login-username').val(), $('#login-password').val())">
                    Log in
                </button>
            </div>
        </div>
    </div>
    <div class="col-md-4">
        <div id="chat-window-container"></div>
    </div>
</div>

<hr />
<footer>
    <p>&copy; @DateTime.Now.Year - kalleguld</p>
    <p>@Html.ActionLink("About", "About", "Home")</p>
</footer>

<div style="display: none" id="templates">
    <ul>
        <li id="friend-list-item-template" class="friend-list-item">
            <a href="#" onclick="openChatWindowFromElement(this)">
                <span class="username"></span>
            </a>
        </li>
        <li id="friend-list-item-placeholder-template" class="friend-list-item placeholder">
            <span class="username"></span>
        </li>
    </ul>

    <div id="chat-window-template" class="chat-window closeable window" onmousedown="setTopmost(this)">
        <div class="window-header drag-handle">
            <span>Chat with </span><span class="username"></span>
            <a class="close-button" onclick="closeWindow(this)">Close</a>
        </div>
        <div class="chat-history"></div>
        <div class="footer c-table">
            <div class="c-row">
                <div class="c-cell">
                    <textarea class="message-input"></textarea>
                </div>
                <div class="c-cell">
                    <button onclick="sendMessageFromElement(this)">Send</button>
                </div>
            </div>
        </div>
    </div>

    <div id="chat-history-item-out-template" class="history-item outgoing">
        <span class="you">You: </span>
        <span class="contents"></span>
    </div>
    <div id="chat-history-item-in-template" class="history-item incoming">
        <span class="fullName"></span> (<span class="username"></span>):
        <span class="contents"></span>
    </div>

    <div id="chat-history-item-placeholder-template" class="history-item placeholder"></div>
</div>
<script type="text/javascript">
    $(function() {
        showLoginWindow();
        var messageHub = $.connection.messageHub;
        messageHub.client.newMessageCreated = function (messageId, sender, receiver) {
            fetchMessage(messageId);
        };
        windowCreated($(".window"));
    })

</script>